/*!build time : 2014-05-23 11:27:46 AM*/
KISSY.add("gallery/crossimage/1.1/cdnPoints",function(){var a={general:[{w:970,h:970},{w:960,h:960},{w:790,h:420},{w:760,h:760},{w:728,h:728},{w:720,h:720},{w:670,h:670},{w:660,h:440},{w:640,h:640},{w:640,h:480},{w:600,h:600},{w:580,h:580},{w:570,h:570},{w:560,h:840},{w:560,h:560},{w:560,h:370},{w:540,h:540},{w:500,h:1e3},{w:500,h:450},{w:490,h:490},{w:490,h:330},{w:485,h:175},{w:480,h:480},{w:480,h:420},{w:468,h:468},{w:460,h:460},{w:430,h:430},{w:420,h:280},{w:400,h:400},{w:400,h:152},{w:360,h:360},{w:350,h:1e3},{w:350,h:350},{w:336,h:336},{w:320,h:480},{w:320,h:320},{w:315,h:315},{w:310,h:310},{w:300,h:1e3},{w:300,h:300},{w:290,h:290},{w:280,h:410},{w:270,h:270},{w:270,h:180},{w:264,h:100},{w:250,h:250},{w:250,h:225},{w:240,h:240},{w:234,h:234},{w:230,h:230},{w:230,h:87},{w:220,h:330},{w:220,h:220},{w:210,h:1e3},{w:210,h:210},{w:210,h:140},{w:200,h:200},{w:190,h:190},{w:190,h:43},{w:180,h:230},{w:180,h:180},{w:180,h:180},{w:170,h:170},{w:170,h:120},{w:160,h:240},{w:160,h:180},{w:160,h:160},{w:160,h:90},{w:150,h:200},{w:145,h:145},{w:140,h:100},{w:130,h:130},{w:128,h:128},{w:125,h:125},{w:120,h:160},{w:120,h:120},{w:120,h:90},{w:115,h:100},{w:110,h:110},{w:110,h:90},{w:100,h:1e3},{w:100,h:150},{w:100,h:100},{w:96,h:54},{w:90,h:135},{w:90,h:90},{w:90,h:60},{w:90,h:45},{w:88,h:88},{w:81,h:65},{w:80,h:1e3},{w:80,h:80},{w:80,h:60},{w:80,h:40},{w:75,h:100},{w:72,h:72},{w:70,h:1e3},{w:70,h:70},{w:64,h:64},{w:60,h:90},{w:60,h:60},{w:60,h:30},{w:50,h:50},{w:48,h:48},{w:40,h:40},{w:36,h:36},{w:32,h:32},{w:30,h:30},{w:24,h:24},{w:20,h:20},{w:16,h:16}],ignoreHeight:[{w:790,h:1e4},{w:620,h:1e4},{w:580,h:1e4},{w:570,h:1e4},{w:450,h:1e4},{w:290,h:1e4},{w:240,h:1e4},{w:220,h:1e4},{w:170,h:1e4},{w:150,h:1e4},{w:110,h:1e4}],ignoreWidth:[{w:1e4,h:500},{w:1e4,h:340},{w:1e4,h:220},{w:1e4,h:170}]};return a}),KISSY.add("gallery/crossimage/1.1/cdnNearest",function(a,b){var c=function(a,b){return Math.min(Math.abs(a.w-b.w),Math.abs(a.h-b.h))},d=function(a,b){return Math.abs(a.w-b.w)+Math.abs(a.h-b.h)};return function(a){if(a&&(a.w||a.h)){var e={w:0,h:0};if(a&&(a.ignoreWidth||a.ignoreHeight))for(var f=a.ignoreWidth?a.h:a.w,g=a.ignoreWidth?"h":"w",h=a.ignoreWidth?b.ignoreWidth:b.ignoreHeight,i=1e6,j=0;j<h.length;j++){var k=h[j],l=k[g];l>=f&&i>l-f&&(i=l-f,e=k)}else for(var m=b.general,i=1e6,n=1e6,j=0;j<m.length;j++){var o=m[j];if(o.w>=a.w&&o.h>=a.h){var p=c(o,a),q=d(o,a);i>=p?(i=p,n=q,e=o):p==i&&n>q&&(n=q,e=o)}else if(o.w<a.w)break}return e.w&&e.h?e:null}}},{requires:["./cdnPoints"]}),KISSY.add("gallery/crossimage/1.1/webp",function(){return function(){function a(a){if(!window.chrome&&!window.opera)return void a(!1);var c=window.localStorage&&window.localStorage.getItem("webpsupport");return null!==c?void a("true"===c):void b(function(b){window.localStorage&&window.localStorage.setItem("webpsupport",b),a(b)})}function b(a){var b=new Image;b.onload=b.onerror=function(){a(b.width>0&&b.height>0)},b.src="data:image/webp;base64,UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA=="}this.WebP||(this.WebP={},WebP.isSupport=function(b){return b?void 0===WebP._isSupport?void a(function(a){b(WebP._isSupport=a)}):void b(WebP._isSupport):void 0})}(),window.WebP},{attach:!1,requires:[]}),KISSY.add("gallery/crossimage/1.1/index",function(a,b,c){function d(a,b){var d;a?(d=a,b&&b(d)):(d=k,i()>1?c.isSupport(function(a){d=a?m:l,b&&b(d)}):b&&b(d))}function e(a,c,e,f){if(!a||!c&&!e)return a;var g;f&&f.quality?g=f.quality:(g=k,d(null,function(a){g=a}));var h,i,l,m=a.replace(/_\d+x\d+(q\d+)?\.jpg/g,"").replace(/_q\d+\.jpg/g,"").replace(/_\.webp/,""),n=f&&f.ignoreWidth,o=f&&f.ignoreHeight,p=b({w:c,h:e,ignoreWidth:n,ignoreHeight:o});return p&&p.w&&p.h?(i=p.w,l=p.h,h=m+"_@Wx@Hq@Q.jpg@WEBP".replace(/@W/i,i).replace(/@H/i,l).replace(/@Q/,g).replace(/@WEBP/,j)):h=m+"_q@Q.jpg@WEBP".replace(/@Q/,g).replace(/@WEBP/,j),h}function f(a,b,c,d){var f=b,g=c;return b&&(f=b*i()),c&&(g=c*i()),e(a,f,g,d)}function g(a,b){return a.hasAttribute?a.hasAttribute(b):"string"==typeof a.getAttribute(b)}function h(b){function c(a){if("img"==a.type&&a.elem&&a.src&&/http/.test(a.src)&&!g(a.elem,"crossimage-ignore")){if(g(a.elem,"crossimage-widthOnly")){if(!a.elem.width)return}else if(g(a.elem,"crossimage-heightOnly")){if(!a.elem.height)return}else if(!a.elem.height||!a.elem.width)return;try{var b,c=a.elem,d=c.width*f.config.userPPI,h=c.height*f.config.userPPI,i=a.src;b=e(i,d,h,{quality:f.config.quality,ignoreWidth:g(a.elem,"crossimage-heightOnly"),ignoreHeight:g(a.elem,"crossimage-widthOnly")}),a.src=b,f.config&&f.config.debug&&window.console}catch(j){}}}var f=this,h={quality:k,userPPI:i()};return f.config=a.merge(h,b),b&&b.quality||d(void 0,function(a){f.config.quality=a}),c}function i(){return window.devicePixelRatio&&window.devicePixelRatio>1?2:1}var j="",k=90,l=50,m=75;return c.isSupport(function(a){j=a?"_.webp":""}),{DatalazyPlugin:h,adjustImgUrl:e,smartAdjustImgUrl:f}},{requires:["./cdnNearest","./webp"]});